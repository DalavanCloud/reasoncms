// custom scripts for luther.edu

$(document).ready(function() {

	// Add js class
	$('body').addClass('js');
	
	// Open / close global search on mobile
	$('#mobile-nav a.search').click(function( event ) {
		$(this).toggleClass('open');
		$('#search-nav').toggleClass('open');
		event.preventDefault();
	});
	
	// Open / close minisite navigation on mobile
	$('#navWrap a.toggle').click(function( event ) {
		$(this).toggleClass('open');
		$('#navWrap').toggleClass('open');
		event.preventDefault();
	});
		
	// Open / close global navigation on desktop	
	//$('#global-nav .sections li a').click(function() {
	//	$(this).parent().toggleClass('open');
	//});

	// Remove &nbsp; tags generated by the WYSIWYG. They get thrown in all over the place, and can really mess up styling.
	$('.fullPost p, .pageContent p, .blurb p').each(function() {
		var $this = $(this);
		$this.html($this.html().replace(/&nbsp;/g, ''));
	});

	
	// show and hide minisite navigation toggle
    $('li.navListItem.accordion > a').click(function( event ) {

		var item = $(this).parent();

		if(item.hasClass('closed')) {
			item.removeClass('closed');
			item.addClass('open');
		} else {
			item.removeClass('open');
			item.addClass('closed');
		}

		item.children('ul').slideToggle('400');

		event.preventDefault();
    });

    // sets open navLists to block so that they toggle correctly from an open state on page load
    $('li.navListItem.accordion.open ul.navList').css('display', 'block');
		
});