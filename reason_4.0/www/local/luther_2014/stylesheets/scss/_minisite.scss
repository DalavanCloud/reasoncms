//
// MINISITE STYLES
//
// @author Nathan Dirks
//
// These styles handle the structure for elements within <section id="minisite">, i.e. everything that is generated by a minisite.
//
// Table of Contents...
// 1. Minisite Banner
// 2. Column Structure
// 3. Minisite Navigation
// 4. Minisite Footer
//

// Foundation imports
@import "settings";
@import "foundation/components/grid";
@import "foundation/components/inline-lists";
@import "foundation/components/flex-video";

// Compass imports
@import "compass/css3";
@import "compass/css3/opacity";
@import "compass/css3/transition";

#minisite {
	@include grid-row();
	padding-top: $column-gutter/2;
	clear: both;
	position: relative;

	@media #{$large-up} {
		padding-top: $column-gutter;
		@include lr-border(transparent);
	}

	// 1. Minisite Banner
	//////////////////////////////////////

	.breadcrumbs {
		font-family: $header-font-family;
		font-size: rem-calc(12);
		span {
			padding: rem-calc(4);
		}
	}

	.pageTitle {
		border-bottom: 1px solid #efefef;
		padding-bottom: $column-gutter/2;
		padding-top: 14px;
		padding-bottom: $column-gutter/2;
		margin: 0;
	}

	#preBanner { // @todo: Emergency Preempt? 
		@include grid-column(16);
		background: red;
	}

	#minisiteBanner {  // Mobile banner
		@include grid-column(16);
		
		#banner {
			h1 { // Hide minisite title, but keep readable by screenreaders
				@extend .screenreader;
			}	
		}

		.pageTitle { // Page Title for mobile
			padding-right: $header-height-mobile;
		}

		@media #{$large-up} {  // Hide #minisiteBanner for desktop
			.breadcrumbs {display: none;}  // Breadcrumbs for mobile
			.pageTitle {display: none;} // Page Title for mobile
		}
	}

	#postBanner { // @todo: DO WE NEED THIS?
		@include grid-column(16);
		background: green;
	}

	#contentAndRelated { // Desktop banner

		.contentHead {  // Hide desktop breadcrumb & page title
			display: none;
			
			@media #{$large-up} {
				display: block;  // Show desktop breadcrumb & page title
			}
		}
	}

	
	// 2. Column Structure
	//////////////////////////////////////
	
	#contentAndRelated {
		@include grid-column(16);
		
		@media #{$medium-up} {
			//@include grid-column($columns: 16, $collapse: true);
		}

		@media #{$large-up} {
			@include grid-column($columns: 16, $collapse: true);
		}

		#contentSections {
			margin-top: $column-gutter/2;
		}
	}
	
	&.hasConRelNav { /* 3 COLUMNS: Nav, Content, & Related */
		@media #{$large-up} {
			#contentAndRelated {
				@include grid-column($columns: 11, $collapse: true);
				padding-left: $column-gutter / 2;

				#contentSections {
					@include grid-column($columns: 12, $collapse: true);
					padding-right: $column-gutter / 2;
				}
				
				#relatedSections {
					@include grid-column($columns: 4, $collapse: true);
					padding-left: $column-gutter / 2;
				}
			}
		}
		@media #{$xlarge-up} {
			#contentAndRelated {
				@include grid-column($columns: 12, $collapse: true);
				padding-left: $column-gutter / 2;

				#contentSections {
					@include grid-column($columns: 10.6666666, $collapse: true);
					padding-right: $column-gutter / 2;
				}
				
				#relatedSections {
					@include grid-column($columns: 5.33333333, $collapse: true);
					padding-left: $column-gutter / 2;
				}
			}	
		}
	}
	
	&.hasConNav { /* 2 COLUMNS: Nav & Content (no Related) */
		@media #{$large-up} {
			#contentAndRelated {
				@include grid-column($columns: 11, $collapse: true);
				padding-left: $column-gutter / 2;
			}
		}
		@media #{$xlarge-up} {
			#contentAndRelated {
				@include grid-column($columns: 12, $collapse: true);
				padding-left: $column-gutter / 2;
			}
		}
	}

	&.hasConRel { /* 2 COLUMNS: Content & Related (no Nav) */
		@media #{$large-up} {
			#contentAndRelated {
				@include grid-column($columns: 16, $collapse: true);
				
				#contentSections {
					@include grid-column($columns: 10, $collapse: true);
					padding-right: $column-gutter / 2;
				}
				#relatedSections {
					@include grid-column($columns: 6, $collapse: true);
					padding-left: $column-gutter / 2;
				}
			}
		}
	}
	
	&.hasCon { /* 1 COLUMN: Content (no Nav or Related) */
		@media #{$large-up} {
			#contentAndRelated {
				@include grid-column($columns: 16, $collapse: true);
			}
				
			#contentSections {
				@include grid-column($columns: 16, $collapse: true);
			}
		}
	}

	#navWrap {  // Navigtaion column
		@include grid-column($columns: 16, $collapse: true);
		
		@media #{$large-up} {
			@include grid-column($columns: 5, $collapse: true);
			padding-right: $column-gutter / 2;
			display: block;
		}
		@media #{$xlarge-up} {
			@include grid-column($columns: 4, $collapse: true);
			padding-right: $column-gutter / 2;
			display: block;
		}
	}

	// 3. Minisite Navigation
	//////////////////////////////////////

	#navWrap {

		@include box-shadow(rgba(#000, .5) 0 0 4px);
		position: relative;
		top: -1px;
		z-index: 800;

		@media #{$large-up} {
			@include box-shadow(0 0 0 0)
		}

		a.toggle {  // Mobile minisite navigation toggle
			position: absolute;
			top: -$header-height-mobile;
			right: 0;
			width: $header-height-mobile;
			height: $header-height-mobile;
			display: block;
			z-index: 12;

			&.open {
				background: $minisite-nav-background;
				@include box-shadow(rgba(#000, .3) -2px -2px 2px);

				.fa-times {display: block;}
				.fa-bars {display: none;}
			}

			i {
				font-size: rem-calc(30); 
				width: $header-height-mobile;
				text-align: center;
				margin-top: rem-calc(15);
				
				&.fa-times {
					display: none;
				}
			}
			span {
				@extend .screenreader;
			}

			@media #{$large-up} {
				display: none;
			}
			
		}
		
		nav {	
			background: $minisite-nav-background;
		}

		#minisiteNavigation,
		.subNavElements {
			display: none;
			
			@media #{$large-up} {
				display: block;
			}
		}

		&.open {

			#minisiteNavigation,
			.subNavElements {
				display: block;
			}
		}
		
		.navListTop {
			margin: 0;
			border-bottom: 1px solid #bfcad1;
		}
		
		.navListTop ul {
			margin: 0;
		}
		
		.navListTop li {
			position: relative;
		}
		
		.navListTop li a {
			display: block;
			padding: $column-gutter / 2.75 $column-gutter / 2;
		}
		
		.navListTop a.home {
			font-size: rem-calc(32);
			line-height: 1;
			font-weight: 300;
			color: #303030;
			border-top: none;
			
			strong {
				font-weight: 300;
			}
			
			@media #{$large-up} {
				padding-top: rem-calc(40);
				padding-bottom: rem-calc(40);
				background: $lc-blue-light-compliment;
				border-bottom: 6px solid #FFF;
				
				&:hover {
					text-decoration: underline;
					//@include transition(.25s, ease)
					//@include transition-property(background, color);
					//@include transition-duration(.25s);
					//@include transition-timing-function(ease-in);
				}
			}
		}
		
		.navListTop ul a {
			display: block;
			border-top: 1px solid #bfcad1;
			$minisite-nav-color: #303030;
			color: $minisite-nav-color;
			font-weight: 300;
			font-size: rem-calc(15);
			
			&:hover {
				background: darken($minisite-nav-background, 2%);
				color: darken($minisite-nav-color, 100%);
			}								
		}
		
		.navListTop ul ul {
		
			a {
				border: none;
				padding: $column-gutter / 3.5 $column-gutter / 2 $column-gutter / 3.5 $column-gutter;
				border-top: 1px solid darken($minisite-nav-background, 3%);
			
				&:hover {
					background: lighten($minisite-nav-background, 2%);	
				}
				
			}
			
			ul li a {
				padding-left: $column-gutter * 1.5;
			}
		}
		
		.navListTop ul .navListItem.open {
			background: #f0f5f8;
			background: lighten($minisite-nav-background, 5%);
			a {
			
				&:hover {
					background: lighten($minisite-nav-background, 2%);	
				}
			}
		}
		
		.jump {
			
			a {
				padding-right: 2.25rem; 
			}
			
			&:before {
				-moz-osx-font-smoothing: grayscale;
				display: inline-block;
				font-family: FontAwesome;
				font-style: normal;
				font-weight: normal;
				line-height: 1;
				content: "\f08e";
				position: absolute;
				top: $column-gutter / 2;
				right: $column-gutter / 2;
			}
		}
	}

	// 4. Minisite Footer
	//////////////////////////////////////
	
	#footer {
		@include grid-column(16);
		font-size: rem-calc(12);
		padding: $column-gutter / 2;
		
		.loginLinkModule {
			text-align: right;
			
			#footerLoginLink {
				font-size: rem-calc(12); margin: 0;
			}
		}
	}

}  // end #minisite