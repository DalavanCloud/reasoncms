//
// MINISITE STYLES
//
// @author Nathan Dirks
//
// These styles handle the structure for elements within <section id="minisite">, i.e. everything that is generated by a minisite.
//
// Table of Contents...
// 1. Minisite Banner
// 2. Column Structure
// 3. Minisite Navigation
// 4. Related Content
// 5. Minisite Footer
//

// Foundation imports
@import "settings";
@import "foundation/components/grid";
@import "foundation/components/inline-lists";
@import "foundation/components/flex-video";

// Compass imports
@import "compass/css3";

// Font Awesome Imports
@import "font-awesome/core";
@import "font-awesome/mixins";
@import "font-awesome/rotated-flipped";
@import "font-awesome/variables";

// Luther imports
@import "extends";
@import "mixins";

.no-js {
	.navListTop .navList .navListItem.open {
		.navList {display: block !important;}
	}
}

#minisite {

	@include grid-row();
	padding-top: rem-calc(22);
	clear: both;
	position: relative;

	@media #{$large-up} {
		padding-top: $column-gutter;
		@include lr-border(transparent);
	}

	// 1. Minisite Banner
	//////////////////////////////////////

	.breadcrumbs {
		font-family: $header-font-family;
		padding: 0 0 rem-calc(21);
		font-size: rem-calc(12);
		line-height: 1.5;

		span {
			padding: rem-calc(4);
		}
	}

	.pageTitle {
		border-bottom: 1px solid $lc-grey;
		padding-bottom: $column-gutter/2;
		padding-top: 14px;
		padding-bottom: $column-gutter/2;
		margin: 0;
		font-size: $h2-font-size;
	}

	#preBanner { // @todo: Emergency Preempt? 
		@include grid-column(16);
		background: red;
	}

	#minisiteBanner {  // Mobile banner
		@include grid-column(16);
		
		#banner {
			h1 { // Hide minisite title, but keep readable by screenreaders
				@extend .screenreader;
			}
		}

		.breadcrumbs {
			margin-right: rem-calc(60) + $column-gutter/3;
		}

		@media #{$large-up} {  // Hide mobile breadcrumb on desktop
			.breadcrumbs {display: none;}
		}
	}

	#postBanner { // @todo: DO WE NEED THIS?
		@include grid-column(16);
		background: green;
	}

	#contentAndRelated { // Desktop banner

		.contentHead {  // Hide desktop breadcrumb & page title
			.pageTitle {
				padding-top: 0;
			}

			.breadcrumbs {
				display: none;
				padding: 0 0 rem-calc(14);

				@media #{$large-up} {
					display: block;  // Show desktop breadcrumb & page title
				}
			}
		}
	}

	
	// 2. Column Structure
	//////////////////////////////////////
	
	#contentAndRelated {
		@include grid-column(16);
		
		@media #{$medium-up} {
			//@include grid-column($columns: 16, $collapse: true);
		}

		@media #{$large-up} {
			@include grid-column($columns: 16, $collapse: true);
		}

		#contentSections,
		#relatedSections {
			margin-top: $column-gutter;
		}

		#contentSections {

			> div:last-child {
				margin-bottom: $column-gutter;
			}
		}
	}
	
	&.hasConRelNav { /* 3 COLUMNS: Nav, Content, & Related */
		@media #{$medium-up} {
			#contentAndRelated {

				#contentSections {
					@include grid-column($columns: 10, $collapse: true);
					padding-right: $column-gutter / 2;
				}
				
				#relatedSections {
					@include grid-column($columns: 6, $collapse: true);
					padding-left: $column-gutter / 2;
				}
			}
		}
		@media #{$large-up} {
			#contentAndRelated {
				@include grid-column($columns: 11, $collapse: true);
				padding-left: $column-gutter / 2;

				#contentSections {
					@include grid-column($columns: 9, $collapse: true);
					padding-right: $column-gutter / 2;
				}
				
				#relatedSections {
					@include grid-column($columns: 7, $collapse: true);
					padding-left: $column-gutter / 2;
				}
			}
		}
		@media #{$xlarge-up} {
			#contentAndRelated {
				@include grid-column($columns: 12, $collapse: true);
				padding-left: $column-gutter / 2;

				#contentSections {
					@include grid-column($columns: 10, $collapse: true);
					padding-right: $column-gutter / 2;
				}
				
				#relatedSections {
					@include grid-column($columns: 6, $collapse: true);
					padding-left: $column-gutter / 2;
				}
			}	
		}
	}
	
	&.hasConNav { /* 2 COLUMNS: Nav & Content (no Related) */
		@media #{$large-up} {
			#contentAndRelated {
				@include grid-column($columns: 11, $collapse: true);
				padding-left: $column-gutter / 2;
			}
		}
		@media #{$xlarge-up} {
			#contentAndRelated {
				@include grid-column($columns: 12, $collapse: true);
				padding-left: $column-gutter / 2;
			}
		}
	}

	&.hasConRel { /* 2 COLUMNS: Content & Related (no Nav) */
		#contentAndRelated {
			
			@media #{$medium-up} {
				
				#contentSections {
					@include grid-column($columns: 10, $collapse: true);
					padding-right: $column-gutter / 2;
				}
				
				#relatedSections {
					@include grid-column($columns: 6, $collapse: true);
					padding-left: $column-gutter / 2;
				}
			}
			
			@media #{$large-up} {

				@include grid-column($columns: 16, $collapse: true);
				
				#contentSections {
					@include grid-column($columns: 11, $collapse: true);
					padding-right: $column-gutter / 2;
				}
				#relatedSections {
					@include grid-column($columns: 5, $collapse: true);
					padding-left: $column-gutter / 2;
					padding: 0 $column-gutter/2;
				}
			}
		}
	}
	
	&.hasCon { /* 1 COLUMN: Content (no Nav or Related) */
		@media #{$large-up} {
			#contentAndRelated {
				@include grid-column($columns: 16, $collapse: true);
			}
				
			#contentSections {
				@include grid-column($columns: 16, $collapse: true);
			}
		}
	}

	#navWrap {  // Navigtaion column
		@include grid-column($columns: 16, $collapse: true);
		
		@media #{$large-up} {
			@include grid-column($columns: 5, $collapse: true);
			padding-right: $column-gutter / 2;
			display: block;
		}
		@media #{$xlarge-up} {
			@include grid-column($columns: 4, $collapse: true);
			padding-right: $column-gutter / 2;
			display: block;
		}
	}

	// 3. Minisite Navigation
	//////////////////////////////////////

	#navWrap {

		@include box-shadow(rgba(#000, .5) 0 0 4px);
		position: relative;
		top: -1px;
		z-index: 9;
		
		&.open {
			//margin-bottom: $column-gutter;	
		}

		@media #{$large-up} {
			@include box-shadow(0 0 0 0);
		}

		a.toggle {  // Mobile minisite navigation toggle button
			position: absolute;
			top: -$header-height-mobile;
			right: 0;
			width: $header-height-mobile;
			height: $header-height-mobile;
			display: block;
			z-index: 12;

			&.open {
				background: lighten($minisite-nav-background, 5%);
				@include box-shadow(rgba(#000, .2) -2px -2px 2px);

				.fa-times {display: block;}
				.fa-bars {display: none;}
			}

			h1 {
				font-size: rem-calc(20);
				color: $lc-blue-light;
			}

			i {
				font-size: rem-calc(20);
				width: $header-height-mobile;
				margin-top: rem-calc(20);
				text-align: center;
				
				&.fa-times {
					display: none;
				}
			}
			span {
				@extend .screenreader;
			}

			@media #{$large-up} {
				display: none;
			}
			
		}
		
		// Sidebar nav background color
		#minisiteNavigation {	
			//background: lighten($minisite-nav-background, 3%);
			background: lighten($minisite-nav-background, 5%);
		}


		#minisiteNavigation,  // Hide nav on mobile
		.subNavElements {
			display: none;
			
			@media #{$large-up} {
				display: block !important;  // Always show nav on desktop
			}
		}

		&.open {  // Show nav on mobile (class changed via jQuery)

			#minisiteNavigation,
			.subNavElements {
				display: block;
			}
		}
		
		.navListTop {  // Places border at the bottom of the sidebar nav
			margin: 0;
		}
		
		.navListTop ul {
			margin: 0;
		}
		
		.navListTop li {
			position: relative;
		}
		
		.navListTop li a {
			display: block;
			padding: $column-gutter / 2.75 $column-gutter / 2;
		}
		
		.navListTop a.home {  //  Large "home" link at the top of the nav
			font-size: rem-calc(32);
			line-height: 1;
			font-weight: 300;
			color: darken($lc-blue-dark, 5%);
			border-top: none;
			position: relative;
			padding-top: rem-calc(30);
			padding-bottom: rem-calc(30);
			
			strong {
				font-weight: 300;
			}

			@media #{$large-up} {
				padding-top: rem-calc(40);
				padding-bottom: rem-calc(40);
				background: $lc-blue-light-compliment;
				border-bottom: 6px solid #FFF;
			}
		}
		
		.navListTop ul {  // TOP LEVEL page links

			a {
				display: block;
				border-top: 1px solid darken($minisite-nav-background, 2%);
				$minisite-nav-color: #303030;
				color: $minisite-nav-color;
				font-weight: 300;
				font-size: rem-calc(15);
				
				&:hover {
					background: rgba(0,0,0,.025);
					color: darken($minisite-nav-color, 100%);
				}

				&:visited {

				}	
			}

			.open a:hover {
				background: #FFF !important;
			}
					
		}
		
		.navListTop ul ul {  // SECOND LEVEL page links
		
			a {
				border: none;
				padding: $column-gutter / 3.5 $column-gutter / 2 $column-gutter / 3.5 $column-gutter;
				border-top: 1px solid #FFF;
			
				&:hover {
					background: none;
					text-decoration: underline;
				}
			}
			
			ul li a {
				padding-left: $column-gutter * 1.5;
			}
		}
		
		.navListTop ul .navListItem {

			&.current {  // CURRENT PAGE ITEM

				> a { 
					font-weight: 700;
				}
				
			}

			&.open {
				background: $minisite-nav-background;
				background: #FFF;
				
				a {
					&:hover {
						//background: lighten($minisite-nav-background, 4%);	
					}
				}
			}

			&.accordion {
				> a {
					padding-right: 2.25rem;

					&:before {
						@extend .fa;
						content: $fa-var-chevron-down;
						position: absolute;
						top: $column-gutter / 2;
						right: $column-gutter / 2;
						@include rotate(0);
						@include transition-property(transform);
						@include transition-duration(.4s);
						@include transition-timing-function(ease-in);
					}
				}

				ul.navList {
					display: none;
				}

			}

			&.accordion.open {

				> a {
					&:before {
						content: $fa-var-chevron-down;
						@include rotate(-180deg);
						@include transition-property(transform);
						@include transition-duration(.4s);
						@include transition-timing-function(ease-in);
					}
				}
			}
		}
		
		.jump {
			
			a {
				padding-right: 2.25rem; 

				&:before {
					@extend .fa;
					content: $fa-var-external-link;
					position: absolute;
					top: $column-gutter / 2;
					right: $column-gutter / 2;
					color: lighten($body-font-color, 25%)
				}
			}
		}
	}

	// 4. Related Content
	//////////////////////////////////////

	#relatedSections,
	.relatedItems // Publications 
	{

		> div {
			margin-bottom: $column-gutter;
		}

		.assets,
		.blurb,
		.relatedEvents {
			background: lighten($lc-grey, 5%);
			padding: $column-gutter/2;

			> *:last-child {
				padding-bottom: 0;
				margin-bottom: 0;
			}
		}

		h3 {
			font-size: $h4-font-size;
			margin-top: 0;
		}

	}


	// 5. Minisite Footer
	//////////////////////////////////////
	
	#footer {
		@include grid-column(16);
		font-size: rem-calc(12);

		padding-top: $column-gutter/2;
		padding-bottom: $column-gutter/2;
		//background: #efefef;

		@media #{$large-up} {
			@include grid-column($columns: 16, $collapse: true);
			padding: $column-gutter/2;
		}

		#maintained {
			color: darken($lc-grey, 30%);
			display: block;
			margin-bottom: 1rem;
			
			@media #{$medium-high-up} {
				width: 45%;
				float: left;
				margin-bottom: 0;
				padding-top: 4px;
			}
		}
		
		.loginLinkModule {
			display: block;

			@media #{$medium-high-up} {
				width: 45%;
				float: right;
				text-align: right;
			}

			.editDivider {display: none;}

			div {
				display: inline;
				

				a {
					background: $lc-grey;
					padding: rem-calc(5) rem-calc(6);
					@include border-radius(4px);
					margin-right: rem-calc(4);
					display: inline-block;
					margin-bottom: rem-calc(4);
					line-height: 1;

					@media #{$medium-high-up} {
						margin-left: rem-calc(4);
					}

					&:hover {
						background: darken($lc-grey, 8%);
						@include default-transition();
					}
				}
			}
			
			#footerLoginLink {
				display: inline-block;
				font-size: rem-calc(12);
				margin: rem-calc(8) 0 0;
				background: $lc-grey;
				padding: rem-calc(5) rem-calc(6);
				@include border-radius(4px);
				margin: 0 rem-calc(4) 0 0;
				white-space: nowrap;
				line-height: 1;

				@media #{$medium-high-up} {
					margin: 0 0 0 rem-calc(4);
				}

				.username {
					font-weight: 400;
				}

				a {
					&:hover {
						text-decoration: underline;
					}
				}
			}

			&.unauthenticated #footerLoginLink {
				margin: 0;
			}
		}
	}

	// 6. Resued Elements
	//////////////////////////////////////

	table {
		tr,
		td {
			font-weight: 300;
		}
	}

	.continueReading {
		margin: 0;

		a {
			background: lighten($lc-blue-light, 52%);
			padding: rem-calc(4) rem-calc(8);
			@include border-radius($global-radius);
		}
		
		
		a:after {
			@extend .fa;
			content: $fa-var-chevron-circle-right;
			margin-left: rem-calc(6);
		}
	}
  
	.feedLink {  // xml link

		@media #{$medium-up} {
			display: inline;
			text-align: right;
		}

		.feedInfo {  // @todo: Replace "xml" text with something less obscure.  Not sure if we have to overwrite function_libraries/feed_utils.php or if there's another way.
			a {
				color: transparent;
			}

			a:before {
				@extend .fa;
				content: $fa-var-rss;
				display: block;
				color: $lc-red;
			}
		}
	}

	.pagination {
		margin-bottom: $column-gutter;
		@include clearfix;

		@media #{$medium-up} {
			width: 50%;	
			float: left;
		}

		&.above {
			dispaly: none;
		}

		.previous {

		}

		.pages {

			a,
			strong {
				margin: 0 rem-calc(4);
			}
		}

		.next {
		}
	}

	.contentMain + .contentPost {
		border-top: 1px solid $lc-grey;
		padding-top: $column-gutter;
		margin-top: $column-gutter;
	}

}  // end #minisite